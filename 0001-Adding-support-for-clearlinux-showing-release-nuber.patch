From f90cda6f599762363bb085341123a243e5441f44 Mon Sep 17 00:00:00 2001
From: Josue David Hernandez <josue.d.hernandez.gutierrez@intel.com>
Date: Mon, 15 Oct 2018 20:33:03 -0500
Subject: [PATCH] Adding support for clearlinux showing release nuber

Signed-off-by: Josue David Hernandez <josue.d.hernandez.gutierrez@intel.com>
---
 .../module_utils/facts/system/distribution.py        | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/lib/ansible/module_utils/facts/system/distribution.py b/lib/ansible/module_utils/facts/system/distribution.py
index a0f3883..246ab1b 100644
--- a/lib/ansible/module_utils/facts/system/distribution.py
+++ b/lib/ansible/module_utils/facts/system/distribution.py
@@ -83,7 +83,6 @@ class DistributionFiles:
         'OracleLinux': 'Oracle Linux',
         'RedHat': 'Red Hat',
         'Altlinux': 'ALT Linux',
-        'ClearLinux': 'Clear Linux',
         'SMGL': 'Source Mage GNU/Linux',
     }
 
@@ -366,6 +365,17 @@ class DistributionFiles:
 
         return True, coreos_facts
 
+    def parse_distribution_file_ClearLinux(self, name, data, path, collected_facts):
+        clear_facts = {}
+        if "clearlinux" not in name.lower():
+            return False, clear_facts
+
+        version = re.search('VERSION_ID=(.*)', data)
+        if version:
+            clear_facts['distribution_release'] = version.groups()[0]
+        return True, clear_facts
+
+
 
 class Distribution(object):
     """
-- 
2.19.0

