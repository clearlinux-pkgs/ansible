From 959dc6705f38701fd03e247b889054121c4d3506 Mon Sep 17 00:00:00 2001
From: Alberto Murillo <alberto.murillo.silva@intel.com>
Date: Tue, 18 Apr 2017 13:45:30 -0500
Subject: [PATCH] try scp first

---
 lib/ansible/plugins/connection/ssh.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/ansible/plugins/connection/ssh.py b/lib/ansible/plugins/connection/ssh.py
index 6ad6895..5bc5aed 100644
--- a/lib/ansible/plugins/connection/ssh.py
+++ b/lib/ansible/plugins/connection/ssh.py
@@ -682,7 +682,7 @@ class Connection(ConnectionBase):
             if not (ssh_transfer_method in ('smart', 'sftp', 'scp', 'piped')):
                 raise AnsibleOptionsError('transfer_method needs to be one of [smart|sftp|scp|piped]')
             if ssh_transfer_method == 'smart':
-                methods = ['sftp', 'scp', 'piped']
+                methods = ['scp', 'sftp', 'piped']
             else:
                 methods = [ssh_transfer_method]
         else:
@@ -695,7 +695,7 @@ class Connection(ConnectionBase):
                 elif scp_if_ssh != 'smart':
                     raise AnsibleOptionsError('scp_if_ssh needs to be one of [smart|True|False]')
             if scp_if_ssh == 'smart':
-                methods = ['sftp', 'scp', 'piped']
+                methods = ['scp', 'sftp', 'piped']
             elif scp_if_ssh is True:
                 methods = ['scp']
             else:
-- 
2.9.3

